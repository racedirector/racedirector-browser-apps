<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Mihail Latyshov" />
	<title>Bets &middot; iRacing Twitch Bet Bot</title>
	<!-- bootstrap -->
	<link rel="stylesheet" type="text/css" href="/libs/bootstrap/css/bootstrap.min.css">
	<!-- less -->
	<link rel="stylesheet/less" type="text/css" href="css/app.less" />
	<script src="/libs/less.min.js"></script>
</head>
<body>

	<script type="text/x-handlebars" data-template-name="index">
		<section {{bind-attr class=":bets-board state.state::bets-closed"}}>
			{{#if isBetsClosed}}
				{{partial 'bets_closed'}}
			{{/if}}

			{{#if isBetsOpened}}
				{{partial 'bets_opened'}}
			{{/if}}

			{{#if isShowWinners}}
				{{partial 'winners'}}
			{{/if}}
		</section>
	</script>

	<script type="text/x-handlebars" data-template-name="_bets_closed">
		<header>
			<h1>Bets Closed</h1>
		</header>

		<table class="table table-condensed bets">
			<tbody>
			{{#each bet in state.bets}}
				<tr {{bind-attr class=bet.bet_type}}>
					<td class="bet-type"></td>
					<td class="total-bets">{{bet.total_bets}}</td>
					<td class="eye"><i class="glyphicon glyphicon-eye-open"></i></td>
					<td class="total-dosh">{{dosh-fmt bet.total}}</td>
				</tr>
			{{/each}}
			</tbody>
		</table>

		{{#view "userBets"}}
			{{#each user_bet in state.user_bets}}
				<li {{bind-attr class=user_bet.bet_type}}>
					<div class="amount">{{dosh-fmt user_bet.amount}}</div>
					<div class="username">
						{{#if user_bet.display_name}}
							{{user_bet.display_name}}
						{{else}}
							{{user_bet.username}}
						{{/if}}
					</div>
				</li>
			{{/each}}
		{{/view}}
	</script>

	<script type="text/x-handlebars" data-template-name="_bets_opened">
		<header>
			<h1>Bets Opened</h1>
		</header>

		<table class="table table-condensed bets">
			<tbody>
			{{#each bet in state.bets}}
				<tr {{bind-attr class=bet.bet_type}}>
					<td class="bet-type"></td>
					<td class="total-bets">{{bet.total_bets}}</td>
					<td class="eye"><i class="glyphicon glyphicon-eye-open"></i></td>
					<td class="total-dosh">{{dosh-fmt bet.total}}</td>
					<td class="payout">&times;{{payout-fmt bet.payout}}</td>
				</tr>
			{{/each}}
			</tbody>
		</table>

		{{#view "userBets"}}
			{{#each user_bet in state.user_bets}}
				<li {{bind-attr class=user_bet.bet_type}}>
					<div class="amount">{{dosh-fmt user_bet.amount}}</div>
					<div class="username">
						{{#if user_bet.display_name}}
							{{user_bet.display_name}}
						{{else}}
							{{user_bet.username}}
						{{/if}}
					</div>
				</li>
			{{/each}}
		{{/view}}
	</script>

	<script type="text/x-handlebars" data-template-name="_winners">
		<header {{bind-attr class=state.win_bet}}>
			<h1>
				{{#if state.winners}}
					<i class="bet-type"></i>
					Winners
				{{else}}
					No Winners
				{{/if}}
			</h1>
		</header>

		{{#view "winners"}}
			<ul class="list-unstyled marquee">
			{{#each winner in state.winners}}
				<li>
					<div class="amount">+{{dosh-fmt winner.amount}}={{dosh-fmt winner.total}}</div>
					<div class="username">{{winner.username}}</div>
				</li>
			{{/each}}
			</ul>
		{{/view}}
	</script>

	<script src="/libs/jquery.min.js"></script>
	<script src="/libs/jquery.keyframes.min.js"></script>
	<script src="/libs/ember/handlebars-v2.0.0.js"></script>
	<script src="/libs/ember/ember.min.js"></script>
	<script src="/libs/coffee-script.js"></script>
	<script src="../js/ws.coffee" type="text/coffeescript"></script>
	<script src="../js/bet-handlebars-helpers.coffee" type="text/coffeescript"></script>
	<script src="js/app.coffee" type="text/coffeescript"></script>
</body>
</html>
